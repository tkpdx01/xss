(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4e46ee99"],{"151d":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-game1"},[a("Header"),a("div",{staticClass:"game1-warp"},[a("div",{staticClass:"back-row"},[a("div",{staticClass:"icon-back",on:{click:function(e){return t.$router.back()}}}),a("div",{staticClass:"record",on:{click:function(e){return t.$router.push("/battle-record")}}},[a("i",{staticClass:"icon-battle-record"}),t._v(" "+t._s(t.$t("game.game1.ritqvp"))+" ")])]),a("div",{staticClass:"warp-box"},[a("div",{staticClass:"tabs"},t._l(t.tabs,(function(e,i){return a("div",{key:e.value,class:["tab-item",{"active-tab":t.currentTab.id===e.id}]},[a("div",{class:"img img"+e.id},[a("img",{attrs:{src:e.img,alt:""}}),0!==i?a("div",{staticClass:"game-lock"}):t._e()])])})),0),a("div",{staticClass:"flex-center"},[a("div",{staticClass:"bg-box"},[a("div",{staticClass:"title"},[t._v(t._s(t.$t("game.game1.d8a579")))]),a("div",{staticClass:"img"},[a("div",{staticClass:"top-filter filter-search"},[a("div",{staticClass:"item"},[a("van-popover",{attrs:{trigger:"click",placement:"bottom-end","get-container":"#list"},scopedSlots:t._u([{key:"reference",fn:function(){return[a("div",{staticClass:"filter",class:{unfold:t.showLevelPopover}},[a("span",[t._v(t._s(t.currentFilterLevel.name))]),a("i",{staticClass:"icon-caret1"})])]},proxy:!0}]),model:{value:t.showLevelPopover,callback:function(e){t.showLevelPopover=e},expression:"showLevelPopover"}},[a("ul",{staticClass:"filter-list"},t._l(t.filterLevelOptions,(function(e){return a("li",{key:e.id,class:{active:t.currentFilterLevel.id===e},on:{click:function(a){return t.onSelectLevel(e)}}},[t._v(" "+t._s(e.name)+" ")])})),0)])],1)]),a("img",{attrs:{src:t.currentTab.img,alt:""}}),a("div",{staticClass:"question"},[t.checkedCard?a("img",{attrs:{src:t.checkedCard&&t.checkedCard.card.image,alt:""}}):a("span",{staticClass:"tip"})])]),a("div",{staticClass:"infos"},[t.checkedCard?[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("i",{staticClass:"icon-xin"}),t._v(" "+t._s(t.$t("game.game1.xc6qme"))+"："+t._s(t.checkedCard.energy)+" ")]),a("div",{staticClass:"col"},[a("i",{staticClass:"icon-jian"}),t._v(" "+t._s(t.$t("game.game1.xur2sr"))+"："+t._s(t.checkedCard.strength)+" ")])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("i",{staticClass:"icon-dun"}),t._v(" "+t._s(t.$t("game.game1.nehz2s"))+"："+t._s(t.checkedCard.defense)+" ")]),a("div",{staticClass:"col"},[a("i",{staticClass:"icon-xie"}),t._v(" "+t._s(t.$t("game.game1.z66kwi"))+"："+t._s(t.checkedCard.agile))])])]:a("p",{staticClass:"tips"},[t._v(t._s(t.$t("game.game1.9pzmkk"))+"~")])],2),a("div",{staticClass:"tiao"},[t._v(" "+t._s(t.$t("game.game1.o94smg"))+": "),t.checkedCard?a("span",[t._v(t._s(t.checkedCard.last_combat))]):a("span",[t._v("?")])])])]),t.needCurrency?a("div",{staticClass:"money"},[a("i",{staticClass:"icon-money"}),a("span",[t._v(t._s(t.needCurrency.amount)+" "+t._s(t.needCurrency.name)+" ")])]):t._e()]),a("div",{staticClass:"bottom-opt"},[a("van-button",{attrs:{type:"warn"},on:{click:t.onShowSelectCard}},[t._v(t._s(t.$t("game.game1.c9i3t9"))+"NFT")]),a("van-button",{attrs:{type:"primary",disabled:!t.checkedCard,loading:t.loading},on:{click:t.onTiaoZhan}},[t._v(t._s(t.$t("game.game1.k6ruyr")))])],1)]),a("van-popup",{staticClass:"popup-select-card",attrs:{position:"bottom"},model:{value:t.isShowSelectCard,callback:function(e){t.isShowSelectCard=e},expression:"isShowSelectCard"}},[a("SelectSpristList",{attrs:{limit:1},on:{setCheckedCard:t.setCheckedCard},scopedSlots:t._u([{key:"searchRight",fn:function(){return[a("div",{staticClass:"button",on:{click:t.onDoneSelect}},[t._v(t._s(t.$t("blindBox.o8bpeu")))])]},proxy:!0}])})],1)],1)},s=[],r=a("5530"),n=a("1da1"),c=(a("b0c0"),a("99af"),a("96cf"),a("0418")),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"con-select-card-list"},[a("div",{staticClass:"tab-content"},[a("div",{staticClass:"top-filter filter-search"},[a("div",{staticClass:"item filter"},[a("van-popover",{attrs:{trigger:"click",placement:"bottom-end","get-container":"#list"},scopedSlots:t._u([{key:"reference",fn:function(){return[a("div",{staticClass:"filter",class:{unfold:t.showLevelPopover}},[a("span",[t._v(t._s(t.currentFilterLevel.label))]),a("i",{staticClass:"icon-caret1"})])]},proxy:!0}]),model:{value:t.showLevelPopover,callback:function(e){t.showLevelPopover=e},expression:"showLevelPopover"}},[a("ul",{staticClass:"filter-list"},t._l(t.filterLevelOptions,(function(e){return a("li",{key:e.value,class:{active:t.currentFilterLevel.value===e},on:{click:function(a){return t.onSelectLevel(e)}}},[t._v(" "+t._s(e.label)+" ")])})),0)])],1),a("div",{staticClass:"item filter"},[a("van-popover",{attrs:{trigger:"click",placement:"bottom-end","get-container":"#list"},scopedSlots:t._u([{key:"reference",fn:function(){return[a("div",{staticClass:"filter",class:{unfold:t.showFilterPopover}},[a("span",[t._v(t._s(t.currentFilterOrder.label))]),a("i",{staticClass:"icon-caret1"})])]},proxy:!0}]),model:{value:t.showFilterPopover,callback:function(e){t.showFilterPopover=e},expression:"showFilterPopover"}},[a("ul",{staticClass:"filter-list"},t._l(t.filterOptions,(function(e){return a("li",{key:e.value,class:{active:t.currentFilterOrder.value===e},on:{click:function(a){return t.onSelectSellOrder(e)}}},[t._v(" "+t._s(e.label)+" ")])})),0)])],1),a("div",{staticClass:"right-info"},[t._t("searchRight")],2)]),t.cardList.length>0?a("van-grid",{staticClass:"card-list",attrs:{"column-num":3}},t._l(t.cardList,(function(e,i){return a("van-grid-item",{key:e.id,staticClass:"card-item",on:{click:function(a){return t.onClickCard(e,i)}}},[a("div",{staticClass:"img"},[a("img",{attrs:{src:e.card.image,alt:""}}),a("div",{staticClass:"meng"},[a("p",[t._v("总属性值: "+t._s(e.total_attribute))]),a("p",[t._v("能量: "+t._s(e.energy))]),a("p",[t._v("算力: "+t._s(e.power))]),a("p",[t._v("剩余次数: "+t._s(e.last_combat))])]),e.checked?a("div",{staticClass:"checkd-img"},[a("van-icon",{attrs:{name:"success",color:"#46ba73",size:"40"}})],1):t._e()]),a("div",{staticClass:"token-id"},[t._v(t._s(t._f("filterAds")(e.token_id,3)))])])})),1):a("van-empty")],1)])},o=[],d=(a("a9e3"),a("4de4"),a("159b"),a("2f62")),u=a("4ec3"),v={props:{limit:{type:Number,default:3}},data:function(){return{showLevelPopover:!1,filterLevelOptions:[],currentFilterLevel:{},showFilterPopover:!1,filterOptions:[],currentFilterOrder:{},cardList:[],checkedCards:[]}},watch:{"$i18n.locale":function(){this.initData()}},mounted:function(){this.initData(),this.getCardData()},beforeDestroy:function(){},computed:Object(r["a"])({},Object(d["b"])(["userInfo"])),methods:{initData:function(){this.filterOptions=[{label:this.$t("island.bag.nvw5oh"),value:""},{label:this.$t("island.bag.p4nvag"),value:1},{label:this.$t("cardList.kr38gh"),value:3},{label:this.$t("island.bag.8prhsa"),value:4},{label:this.$t("island.bag.ckg0bj"),value:5},{label:this.$t("CardList.zkm4cr"),value:6}],this.filterLevelOptions=[{label:this.$t("island.bag.nvw5oh"),value:""},{label:"LV1",value:1},{label:"LV2",value:2},{label:"LV3",value:3},{label:"LV4",value:4},{label:"LV5",value:5}],this.currentFilterLevel=this.filterLevelOptions[0],this.currentFilterOrder=this.filterOptions[1]},onSelectLevel:function(t){this.currentFilterLevel=t,this.showFilterPopover=!1,this.getCardData()},onSelectSellOrder:function(t){this.currentFilterOrder=t,this.showLevelPopover=!1,this.getCardData()},getCardData:function(){var t=this,e=this.$toast.loading();Object(u["A"])({page:1,size:1e4,grade:this.currentFilterLevel.value,status:this.currentFilterOrder.value}).then((function(a){t.cardList=a.data.list,e.clear()}))},onClickCard:function(t,e){if(1===t.status){var a=JSON.parse(JSON.stringify(this.cardList));this.checkedCards=[];var i=a.filter((function(t){return t.checked}));i.length!==this.limit||t.checked||(a.forEach((function(t){i[0].id===t.id&&(t.checked=!1)})),this.cardList=a),this.$set(this.cardList,e,Object(r["a"])(Object(r["a"])({},t),{},{checked:!t.checked})),this.checkedCards=this.cardList.filter((function(t){return t.checked})),this.$emit("setCheckedCard",this.checkedCards)}else this.$router.push("/card-detail?id=".concat(t.id))}}},h=v,f=(a("3592"),a("2877")),m=Object(f["a"])(h,l,o,!1,null,null,null),p=m.exports,C=a("fe75"),g={components:{Header:c["a"],SelectSpristList:p},data:function(){return{tabs:[],currentTab:{},showLevelPopover:!1,currentFilterLevel:{},filterLevelOptions:[],isShowSelectCard:!1,checkedCard:null,needCurrency:null,loading:!1,timer1:null,timer2:null,combatResult:null}},watch:{"$i18n.locale":function(){this.initData()}},mounted:function(){this.initData()},methods:{initData:function(){this.tabs=[{label:this.$t("game.Tribe.g2mdbm"),value:1},{label:this.$t("game.Tribe.johx9t"),value:2},{label:this.$t("game.Tribe.45ldlz"),value:3}],this.currentTab=this.tabs[0]},onSelectLevel:function(t){this.currentFilterLevel=t,this.getAmount()},getScene:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.$toast.loading(),e.next=3,Object(u["n"])({scene_id:t.$route.query.sceneId});case 3:i=e.sent,t.tabs=i.data,t.currentTab=i.data[0],a.clear(),t.filterLevelOptions=i.data,t.currentFilterLevel=t.filterLevelOptions[0];case 9:case"end":return e.stop()}}),e)})))()},onShowSelectCard:function(){this.isShowSelectCard=!0},setCheckedCard:function(t){0===t[0].last_combat?this.$toast(this.$t("game.game1.o94smg1")):this.checkedCard=t[0]},onDoneSelect:function(){this.checkedCard&&(this.isShowSelectCard=!1,this.getAmount())},onTiaoZhan:function(){var t=this;clearTimeout(this.timer1),this.loading=!0;try{var e=this.needCurrency,a=e.name,i=e.contract_address,s=e.precision,r="combat@".concat(this.checkedCard.id,"@").concat(this.needCurrency.key,"@").concat(this.currentFilterLevel.id),n={coinName:a,ads:i,amount:this.needCurrency.amount,precision:s,remarks:r};Object(C["e"])(n).then((function(e){e&&(t.$toast(t.$t("withdraw.afuexq")),t.timer1=setTimeout((function(){t.onCombat()}),2e3))}))}finally{this.loading=!1}},onCombat:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.loadingFun(100),a=null,i=t,s=setInterval((function(){a?(clearInterval(s),thiss.$toast.clear()):Object(u["j"])({key:i.needCurrency.key}).then((function(t){200===t.code&&(localStorage.setItem("combatResult",JSON.stringify(t.data)),a=t.data,i.$router.push("/battle"),clearInterval(s))}))}),1e4);case 4:case"end":return e.stop()}}),e)})))()},getAmount:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(u["i"])({scene_id:t.currentFilterLevel.id});case 2:a=e.sent,t.needCurrency=Object(r["a"])(Object(r["a"])({},a.data),a.data.currency);case 4:case"end":return e.stop()}}),e)})))()},loadingFun:function(t){var e=this,a=(this.$toast.loading({duration:0,forbidClick:!0,message:"正在获取对战信息..."}),t),i=setInterval((function(){a--,a||(clearInterval(i),e.$toast.clear())}),1e3)}}},b=g,k=(a("f644"),Object(f["a"])(b,i,s,!1,null,null,null));e["default"]=k.exports},"331f":function(t,e,a){},3592:function(t,e,a){"use strict";a("f77d")},f644:function(t,e,a){"use strict";a("331f")},f77d:function(t,e,a){}}]);