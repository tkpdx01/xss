(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3b3427de"],{2448:function(t,i,s){"use strict";s("f694")},daff:function(t,i,s){"use strict";s.r(i);var n=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"page-blind-box"},[s("Header"),s("div",{staticClass:"banner"}),s("div",{staticClass:"inner"},[t._m(0),t.showResultText?s("div",{staticClass:"tips"},[t._v("正在获取结果,请耐心等待...")]):t._e(),s("van-button",{staticStyle:{width:"100%"},attrs:{type:"primary",disabled:t.showResultText},on:{click:function(i){t.showBuyDialog=!0}}},[t._v(" 购买盲盒 ")]),s("div",{staticClass:"link",on:{click:t.onShowRecords}},[t._v(t._s(t.$t("blindBox.2vr84f")))])],1),s("van-dialog",{staticClass:"blind-box-dialog",attrs:{showConfirmButton:!1},model:{value:t.showBuyDialog,callback:function(i){t.showBuyDialog=i},expression:"showBuyDialog"}},[s("div",{staticClass:"blind-box-dialog-inner"},[s("div",{staticClass:"header"},[s("i",{staticClass:"icon-close",on:{click:function(i){t.showBuyDialog=!1}}})]),s("div",{staticClass:"body"},[s("div",{staticClass:"form"},[s("div",{staticClass:"form-item"},[s("span",{staticClass:"label"},[t._v(t._s(t.$t("blindBox.fus19c")))]),s("van-field",{attrs:{placeholder:t.$t("blindBox.67l3fk")},model:{value:t.buyAmount,callback:function(i){t.buyAmount=i},expression:"buyAmount"}})],1),s("div",{staticClass:"form-item"},[s("span",{staticClass:"label"},[t._v(" "+t._s(t.$t("blindBox.5h3hle"))+" ")]),s("van-field",{attrs:{disabled:""},model:{value:t.payNum,callback:function(i){t.payNum=i},expression:"payNum"}}),s("van-popover",{attrs:{trigger:"click",placement:"bottom","get-container":"#from"},scopedSlots:t._u([{key:"reference",fn:function(){return[s("div",{staticClass:"currency",class:{unfold:t.showToPopover}},[s("i",{staticClass:"icon-currency"}),s("span",[t._v(t._s(t.currentCoin))]),s("i",{staticClass:"icon-arrow"})])]},proxy:!0}]),model:{value:t.showToPopover,callback:function(i){t.showToPopover=i},expression:"showToPopover"}},[s("ul",{staticClass:"currency-list"},[s("li",{class:{active:"GROK"===t.currentCoin},on:{click:function(i){return t.onSelectCoin("GROK")}}},[t._v("GROK")]),s("li",{class:{active:"USDT"===t.currentCoin},on:{click:function(i){return t.onSelectCoin("USDT")}}},[t._v("USDT")]),s("li",{class:{active:"SEED"===t.currentCoin},on:{click:function(i){return t.onSelectCoin("SEED")}}},[t._v("SEED")])])])],1)]),s("div",{staticClass:"btn"},[s("van-button",{attrs:{type:"primary",disabled:t.disabled,loading:t.loading1},on:{click:t.onBuy}},[t._v(t._s(t.$t("blindBox.9k2c2a")))])],1)])])]),s("van-dialog",{staticClass:"mining-dialog",attrs:{showConfirmButton:!1},model:{value:t.showResultDialog,callback:function(i){t.showResultDialog=i},expression:"showResultDialog"}},[s("div",{staticClass:"mining-dialog-inner"},[s("div",{staticClass:"header"},[s("i",{staticClass:"icon-close",on:{click:function(i){t.showResultDialog=!1}}})]),s("div",{staticClass:"body",staticStyle:{"text-align":"center"}},[s("swiper",{ref:"mySwiper",staticClass:"swiper",attrs:{options:t.swiperOption},on:{slideChange:t.slideChange}},t._l(t.result,(function(i){return s("swiper-slide",{key:i.id},[s("img",{attrs:{src:i.card.image,alt:""}}),s("div",{staticClass:"info"},[s("div",{staticClass:"descriptions"},[s("div",[t._v(t._s(t.$t("blindBox.m7u5pj"))+t._s(i.card.name))]),s("div",[t._v(t._s(t.$t("blindBox.w3o22n"))+t._s(i.card.id))]),s("div",[t._v(t._s(t.$t("blindBox.7uhxfd"))+t._s(i.power))])])])])})),1),s("div",{staticClass:"btn"},[s("van-button",{attrs:{type:"primary"},on:{click:t.onConfirm}},[t._v(t._s(t.$t("blindBox.o8bpeu")))])],1)],1)])]),s("van-dialog",{staticClass:"buy-dialog mining-dialog",attrs:{"show-confirm-button":!1},model:{value:t.showRecords,callback:function(i){t.showRecords=i},expression:"showRecords"}},[s("div",{staticClass:"select-currency mining-dialog-inner"},[s("div",{staticClass:"header",staticStyle:{height:"auto"}},[s("h2",[t._v(t._s(t.$t("blindBox.4dctxm")))]),s("i",{staticClass:"icon-close",on:{click:function(i){t.showRecords=!1}}})]),s("div",{staticClass:"record-list"},[s("van-row",{staticClass:"record-title"},[s("van-col",{attrs:{span:"6"}},[t._v(t._s(t.$t("blindBox.keutkc")))]),s("van-col",{attrs:{span:"6"}},[t._v(" "+t._s(t.$t("blindBox.j5hk8l"))+" ")]),s("van-col",{attrs:{span:"6"}},[t._v(" "+t._s(t.$t("blindBox.dqbqkg"))+" ")]),s("van-col",{staticClass:"tr",attrs:{span:"6"}},[t._v(t._s(t.$t("blindBox.89we1m")))])],1),t.recordList.length>0?t._l(t.recordList,(function(i,n){return s("van-row",{key:n,staticClass:"record-item"},[s("van-col",{attrs:{span:"6"}},[s("div",[t._v(t._s(i.coin))])]),s("van-col",{attrs:{span:"6"}},[s("div",[t._v(t._s(i.box_num))])]),s("van-col",{attrs:{span:"6"}},[s("div",[t._v(t._s(i.coin_num))])]),s("van-col",{staticClass:"tr",attrs:{span:"6"}},[t._v(t._s(i.created_at))])],1)})):s("van-empty")],2)])])],1)},a=[function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"box"},[s("div",{staticClass:"gift"})])}],o=s("5530"),e=(s("b0c0"),s("99af"),s("0418")),c=s("4ec3"),r=s("fe75"),l=s("7212"),u=(s("a7a3"),s("2f62")),d={components:{Header:e["a"],SwiperSlide:l["SwiperSlide"],Swiper:l["Swiper"]},data:function(){return{showBuyDialog:!1,buyAmount:1,payNum:"",showToPopover:!1,currentCoin:"GROK",blindObj:{},coinBalance:0,coinApproveNum:0,showResultDialog:!1,buy:1,swiperOption:{slidesPerView:1.5,spaceBetween:20,centeredSlides:!0},type:"market",cardList:[],currentCard:{},timer:null,result:[],showRecords:!1,recordList:[],showResultText:!1,activeTab:1,loading1:!1}},computed:Object(o["a"])(Object(o["a"])({},Object(u["b"])(["userInfo"])),{},{disabled:function(){return!this.payNum||0==+this.payNum},swiper:function(){return this.$refs.mySwiper.swiper}}),watch:{buyAmount:function(t){}},mounted:function(){this.getAmountData()},methods:{onShowRecords:function(){this.showRecords=!0,this.getTab1Data()},getTab1Data:function(){var t=this;Object(c["a"])({page:1,size:1e5}).then((function(i){t.recordList=i.data.list}))},onSelectCoin:function(t){this.currentCoin=t,this.getAmountData()},getAmountData:function(){var t=this,i={num:this.buyAmount,coin:this.currentCoin,is_pay:0};this.loading1=!0,Object(c["o"])(i).then((function(i){if(200==i.code){t.blindObj=i.data,t.payNum=i.data.amount;var s=i.data.currency,n=s.contract_address,a=s.precision,o=s.name,e={coinName:o,ads:n,precision:a};Object(r["c"])(e).then((function(i){t.coinBalance=i})),Object(r["a"])(e).then((function(i){t.coinApproveNum=i}))}else t.payNum=0;t.loading1=!1}))},onBuy:function(){var t=this;if(this.coinApproveNum>this.payNum)this.recharge();else{var i=this.blindObj.currency,s=i.contract_address,n=i.precision;Object(r["b"])({ads:s,precision:n}).then((function(i){t.recharge()}))}},recharge:function(){var t=this;this.timer&&clearInterval(this.timer);var i=this.blindObj.amount,s=this.blindObj.getKey,n=this.blindObj.currency,a=n.contract_address,o=n.precision,e=n.name,c={coinName:this.currentCoin,ads:a,amount:i,precision:o,remarks:"buy@".concat(e,"@").concat(this.buyAmount,"@").concat(s)};Object(r["e"])(c).then((function(i){t.showBuyDialog=!1,t.$router.push("/island/bag")}))},onSell:function(){this.type="market",this.showResultDialog=!0},onAuction:function(){this.type="auction",this.showResultDialog=!0},slideChange:function(){var t=this.$refs.mySwiper.$swiper.activeIndex;this.currentCard=this.result[t]},onConfirm:function(){this.$router.push("/card-list")},onShare:function(){}}},v=d,h=(s("2448"),s("2877")),p=Object(h["a"])(v,n,a,!1,null,null,null);i["default"]=p.exports},f694:function(t,i,s){}}]);